<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KreatorKart — Brand Dashboard</title>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EEY5VFKZWN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EEY5VFKZWN');
</script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#071226;      /* deep navy */
    --card:#071a2e;
    --accent:#00d4b8;   /* teal */
    --accent-2:#ff3fa6; /* magenta-ish */
    --muted:rgba(255,255,255,0.88);
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background: radial-gradient(1000px 400px at 8% 8%, rgba(0,212,184,0.03), transparent),
                radial-gradient(700px 300px at 92% 82%, rgba(255,63,166,0.02), transparent),
                var(--bg);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }

  /* ========== Topbar ========== */
  .topbar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:18px 28px;
    max-width:1400px;
    margin: 24px auto 0;
    position:relative;
    z-index:50;
  }
  .logo {
    font-weight:900;
    color:var(--accent);
    letter-spacing:0.6px;
    font-size:1.05rem;
  }
  .navlinks {
    display:flex; gap:12px; align-items:center;
  }
  .navlinks a, .navlinks button {
    color:var(--muted);
    text-decoration:none;
    padding:8px 12px;
    border-radius:8px; 
    font-weight:600;
    background:none;
    border:none;
    cursor:pointer;
  }
  .navlinks a:hover, .navlinks button:hover{ color:var(--accent); }

  /* ========== Main Layout ========== */
  .dashboard {
    max-width:1400px;
    margin:0 auto;
    padding:20px;
    display:grid;
    grid-template-columns: 280px 1fr;
    gap:24px;
    min-height:calc(100vh - 120px);
  }

  /* ========== Filters Sidebar ========== */
  .filters-sidebar {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px;
    padding:20px;
    border:1px solid rgba(255,255,255,0.03);
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
    height:fit-content;
    position:sticky;
    top:20px;
  }

  .filter-section {
    margin-bottom:24px;
  }

  .filter-title {
    color:var(--accent);
    font-weight:700;
    margin-bottom:12px;
    font-size:0.95rem;
    letter-spacing:0.3px;
  }

  .filter-group {
    display:flex;
    flex-direction:column;
    gap:8px;
  }

  .filter-item {
    display:flex;
    align-items:center;
    gap:8px;
    padding:6px 0;
    cursor:pointer;
  }

  .filter-item input[type="checkbox"] {
    width:16px;
    height:16px;
    accent-color:var(--accent);
  }

  .filter-item input[type="range"] {
    flex:1;
    accent-color:var(--accent);
  }

  .range-values {
    display:flex;
    justify-content:space-between;
    font-size:0.85rem;
    color:rgba(255,255,255,0.7);
    margin-top:4px;
  }

  .clear-filters {
    background:rgba(255,63,166,0.1);
    color:var(--accent-2);
    border:1px solid rgba(255,63,166,0.2);
    padding:8px 16px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    width:100%;
    margin-top:16px;
  }

  .clear-filters:hover {
    background:rgba(255,63,166,0.15);
  }

  /* ========== Main Content Area ========== */
  .main-content {
    display:flex;
    flex-direction:column;
    gap:20px;
  }

  .search-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:16px;
  }

  .search-bar {
    flex:1;
    background:rgba(255,255,255,0.02);
    border:1px solid rgba(255,255,255,0.06);
    padding:12px 16px;
    border-radius:12px;
    color:white;
    font-size:1rem;
  }

  .search-bar::placeholder {
    color:rgba(255,255,255,0.5);
  }

  .sort-dropdown {
    background:rgba(255,255,255,0.02);
    border:1px solid rgba(255,255,255,0.06);
    padding:12px 16px;
    border-radius:12px;
    color:white;
    cursor:pointer;
  }

  .results-count {
    color:rgba(255,255,255,0.7);
    font-size:0.9rem;
    margin-bottom:8px;
  }

  /* ========== Influencer Grid ========== */
  .influencers-grid {
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap:20px;
  }

  .influencer-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px;
    padding:20px;
    border:1px solid rgba(255,255,255,0.03);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor:pointer;
  }

  .influencer-card:hover {
    transform:translateY(-4px);
    box-shadow: 0 30px 60px rgba(0,0,0,0.5);
  }

  .influencer-header {
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:12px;
  }

  .avatar {
    width:50px;
    height:50px;
    border-radius:50%;
    background: linear-gradient(45deg, var(--accent), var(--accent-2));
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    color:white;
  }

  .influencer-info h3 {
    margin:0;
    color:white;
    font-weight:700;
    font-size:1.1rem;
  }

  .influencer-meta {
    color:rgba(255,255,255,0.7);
    font-size:0.85rem;
    margin:2px 0;
  }

  .domain-tag {
    display:inline-block;
    background:rgba(0,212,184,0.1);
    color:var(--accent);
    padding:4px 8px;
    border-radius:12px;
    font-size:0.75rem;
    font-weight:600;
    margin-top:8px;
  }

  .bio {
    color:rgba(255,255,255,0.8);
    font-size:0.9rem;
    line-height:1.4;
    margin:12px 0;
  }

  .social-stats {
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:8px;
    margin:12px 0;
  }

  .social-stat {
    background:rgba(255,255,255,0.02);
    padding:8px;
    border-radius:8px;
    text-align:center;
    cursor:pointer;
    transition: all 0.2s ease;
  }

  .social-stat:hover {
    background:rgba(255,255,255,0.05);
    transform:translateY(-1px);
  }

  .social-stat .platform {
    font-size:0.75rem;
    color:rgba(255,255,255,0.6);
    display:block;
  }

  .social-stat .count {
    font-weight:700;
    color:var(--accent);
    font-size:0.9rem;
  }

  .pricing {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:16px;
    padding-top:12px;
    border-top:1px solid rgba(255,255,255,0.06);
  }

  .price-section {
    display:flex;
    flex-direction:column;
    gap:4px;
  }

  .price-tag {
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color:#001;
    padding:6px 12px;
    border-radius:8px;
    font-weight:700;
    font-size:0.9rem;
  }

  .price-inr {
    font-size:0.8rem;
    color:rgba(255,255,255,0.7);
    font-weight:500;
  }

  .pay-now-btn {
    background:linear-gradient(45deg, var(--accent), var(--accent-2));
    border:none;
    color:#001;
    padding:8px 16px;
    border-radius:8px;
    cursor:pointer;
    font-weight:700;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .pay-now-btn:hover {
    transform:translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,212,184,0.3);
  }

  /* ========== Hover Popup ========== */
  .profile-popup {
    position:fixed;
    background: linear-gradient(180deg, rgba(0,0,0,0.95), rgba(0,0,0,0.9));
    border:1px solid rgba(255,255,255,0.1);
    border-radius:12px;
    padding:16px;
    max-width:280px;
    z-index:10000;
    pointer-events:none;
    box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    backdrop-filter: blur(10px);
    opacity:0;
    transform:translateY(10px) scale(0.95);
    transition: all 0.2s ease;
  }

  .profile-popup.show {
    opacity:1;
    transform:translateY(0) scale(1);
  }

  .popup-header {
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:8px;
  }

  .popup-avatar {
    width:40px;
    height:40px;
    border-radius:50%;
    background: linear-gradient(45deg, var(--accent), var(--accent-2));
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    color:white;
    font-size:0.9rem;
  }

  .popup-name {
    color:white;
    font-weight:700;
    font-size:1rem;
    margin:0;
  }

  .popup-bio {
    color:rgba(255,255,255,0.8);
    font-size:0.85rem;
    line-height:1.3;
    margin:0;
  }

  /* ========== Mobile Responsiveness ========== */
  @media (max-width: 1024px) {
    .dashboard {
      grid-template-columns: 1fr;
      gap:16px;
    }
    
    .filters-sidebar {
      position:static;
      order:2;
    }
    
    .main-content {
      order:1;
    }
    
    .influencers-grid {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
  }

  @media (max-width: 640px) {
    .topbar {
      padding:12px 16px;
      flex-direction:column;
      gap:12px;
    }
    
    .navlinks {
      flex-wrap:wrap;
      justify-content:center;
    }
    
    .search-header {
      flex-direction:column;
      align-items:stretch;
    }
    
    .influencers-grid {
      grid-template-columns: 1fr;
    }

    .profile-popup {
      max-width:250px;
      padding:12px;
    }
  }

  /* Animation utilities */
  .fade-in {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Loading state */
  .loading {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 200px;
    color: var(--accent);
    font-weight: 600;
  }

  .spinner {
    width: 24px;
    height: 24px;
    border: 2px solid rgba(0,212,184,0.3);
    border-top: 2px solid var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 8px;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
</head>
<body>

  <!-- Profile Popup -->
  <div class="profile-popup" id="profilePopup">
    <div class="popup-header">
      <div class="popup-avatar" id="popupAvatar"></div>
      <h4 class="popup-name" id="popupName"></h4>
    </div>
    <p class="popup-bio" id="popupBio"></p>
  </div>

  <!-- Topbar -->
  <div class="topbar">
    <div class="logo">KreatorKart</div>
    <div class="navlinks">
      <a href="index.html">Home</a>
      <a href="messagebrand.html">Messages</a>
      <button onclick="window.location.href='myaccount.html'">My Account</button>
    
    </div>
  </div>

  <div class="dashboard">
    <!-- Filters Sidebar -->
    <div class="filters-sidebar">
      <div class="filter-section">
        <div class="filter-title">Age Range</div>
        <input type="range" id="ageRange" min="18" max="50" value="35" oninput="updateAgeRange(this.value)">
        <div class="range-values">
          <span>18</span>
          <span id="ageValue">18-35</span>
          <span>50+</span>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-title">Domain</div>
        <div class="filter-group" id="domainFilters">
          <div class="filter-item">
            <input type="checkbox" id="fashion" value="Fashion" onchange="applyFilters()">
            <label for="fashion">Fashion</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="food" value="Food" onchange="applyFilters()">
            <label for="food">Food & Culinary</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="fitness" value="Fitness" onchange="applyFilters()">
            <label for="fitness">Fitness</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="tech" value="Tech" onchange="applyFilters()">
            <label for="tech">Technology</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="beauty" value="Beauty" onchange="applyFilters()">
            <label for="beauty">Beauty</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="travel" value="Travel" onchange="applyFilters()">
            <label for="travel">Travel</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="lifestyle" value="Lifestyle" onchange="applyFilters()">
            <label for="lifestyle">Lifestyle</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="finance" value="Finance" onchange="applyFilters()">
            <label for="finance">Finance</label>
          </div>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-title">Price Range (per video)</div>
        <input type="range" id="priceRange" min="50" max="5000" value="2500" oninput="updatePriceRange(this.value)">
        <div class="range-values">
          <span>$50</span>
          <span id="priceValue">$50-2500</span>
          <span>$5000+</span>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-title">Instagram Followers</div>
        <div class="filter-group">
          <div class="filter-item">
            <input type="checkbox" id="micro" value="1000-10000" onchange="applyFilters()">
            <label for="micro">1K - 10K</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="mid" value="10000-100000" onchange="applyFilters()">
            <label for="mid">10K - 100K</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="macro" value="100000-1000000" onchange="applyFilters()">
            <label for="macro">100K - 1M</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="mega" value="1000000+" onchange="applyFilters()">
            <label for="mega">1M+</label>
          </div>
        </div>
      </div>

      <div class="filter-section">
        <div class="filter-title">Location</div>
        <div class="filter-group" id="locationFilters">
          <div class="filter-item">
            <input type="checkbox" id="mumbai" value="Mumbai" onchange="applyFilters()">
            <label for="mumbai">Mumbai</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="delhi" value="Delhi" onchange="applyFilters()">
            <label for="delhi">Delhi</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="bangalore" value="Bangalore" onchange="applyFilters()">
            <label for="bangalore">Bangalore</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="pune" value="Pune" onchange="applyFilters()">
            <label for="pune">Pune</label>
          </div>
          <div class="filter-item">
            <input type="checkbox" id="hyderabad" value="Hyderabad" onchange="applyFilters()">
            <label for="hyderabad">Hyderabad</label>
          </div>
        </div>
      </div>

      <button class="clear-filters" onclick="clearAllFilters()">Clear All Filters</button>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="search-header">
        <input type="text" class="search-bar" placeholder="Search influencers by name, domain, or location..." oninput="searchInfluencers(this.value)">
        <select class="sort-dropdown" onchange="sortInfluencers(this.value)">
          <option value="relevance">Sort by Relevance</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="followers-high">Followers: High to Low</option>
          <option value="followers-low">Followers: Low to High</option>
          <option value="name">Name A-Z</option>
        </select>
      </div>

      <div class="results-count" id="resultsCount"></div>

      <div class="influencers-grid" id="influencersGrid">
      </div>
    </div>
  </div>

<script>
// Sample influencer data with social media URLs
const influencersData = [
  { 
    name: "Hardik Kumar", 
    age: 20, 
    bio: "Young fashion innovator blending streetwear with Indian traditional elements. Creating viral fashion content and trending style challenges.", 
    location: "Mumbai", 
    domain: "Fashion", 
    instagram: 125000, 
    linkedin: 3800, 
    price: 950, 
    avatar: "HK",
    instagramUrl: "https://instagram.com/hardik_kumarr_",
    linkedinUrl: "https://www.linkedin.com/in/hardik-kumar-8613122a2/"
  },
  { 
    name: "Nikhil Joshi", 
    age: 30, 
    bio: "Stock market analyst and crypto educator.", 
    location: "Bangalore", 
    domain: "Finance", 
    instagram: 56000, 
    linkedin: 22000, 
    price: 1350, 
    avatar: "NJ",
    instagramUrl: "https://instagram.com/nikhil_crypto",
    linkedinUrl: "https://www.linkedin.com/in/nikhil-joshi-finance"
  },
  { 
    name: "Tanya Khanna", 
    age: 22, 
    bio: "Gen-Z fashion creator focusing on affordable and trendy outfits.", 
    location: "Delhi", 
    domain: "Fashion", 
    instagram: 71000, 
    linkedin: 3200, 
    price: 1450, 
    avatar: "TK",
    instagramUrl: "https://instagram.com/tanya_trendy",
    linkedinUrl: "https://www.linkedin.com/in/tanya-khanna-fashion"
  },
  { 
    name: "Ajay Krishnan", 
    age: 29, 
    bio: "South Indian cuisine specialist and restaurant reviewer.", 
    location: "Hyderabad", 
    domain: "Food", 
    instagram: 58000, 
    linkedin: 7400, 
    price: 1050, 
    avatar: "AK",
    instagramUrl: "https://instagram.com/ajay_southfood",
    linkedinUrl: "https://www.linkedin.com/in/ajay-krishnan-food"
  },
  { 
    name: "Sanya Kapoor", 
    age: 26, 
    bio: "Pilates instructor and women's health advocate.", 
    location: "Mumbai", 
    domain: "Fitness", 
    instagram: 44000, 
    linkedin: 8800, 
    price: 750, 
    avatar: "SK",
    instagramUrl: "https://instagram.com/sanya_pilates",
    linkedinUrl: "https://www.linkedin.com/in/sanya-kapoor-fitness"
  },
  { 
    name: "Dev Patel", 
    age: 27, 
    bio: "AI and machine learning educator making complex topics accessible.", 
    location: "Bangalore", 
    domain: "Tech", 
    instagram: 62000, 
    linkedin: 28000, 
    price: 1550, 
    avatar: "DP",
    instagramUrl: "https://instagram.com/dev_ai_guru",
    linkedinUrl: "https://www.linkedin.com/in/dev-patel-ai"
  },
  { 
    name: "Neha Agarwal", 
    age: 24, 
    bio: "Skincare routine specialist focusing on Indian skin types.", 
    location: "Pune", 
    domain: "Beauty", 
    instagram: 83000, 
    linkedin: 4900, 
    price: 1650, 
    avatar: "NA",
    instagramUrl: "https://instagram.com/neha_skincare",
    linkedinUrl: "https://www.linkedin.com/in/neha-agarwal-beauty"
  },
  { 
    name: "Rohan Gupta", 
    age: 31, 
    bio: "Solo travel blogger and budget travel expert.", 
    location: "Delhi", 
    domain: "Travel", 
    instagram: 91000, 
    linkedin: 12500, 
    price: 1900, 
    avatar: "RG",
    instagramUrl: "https://instagram.com/rohan_solotravel",
    linkedinUrl: "https://www.linkedin.com/in/rohan-gupta-travel"
  },
  { 
    name: "Aditi Sharma", 
    age: 28, 
    bio: "Interior designer sharing budget-friendly home makeover ideas.", 
    location: "Mumbai", 
    domain: "Lifestyle", 
    instagram: 67000, 
    linkedin: 9200, 
    price: 1250, 
    avatar: "AS",
    instagramUrl: "https://instagram.com/aditi_interiors",
    linkedinUrl: "https://www.linkedin.com/in/aditi-sharma-interior"
  },
  { 
    name: "Harsh Mittal", 
    age: 32, 
    bio: "Personal finance coach and investment strategy expert.", 
    location: "Hyderabad", 
    domain: "Finance", 
    instagram: 48000, 
    linkedin: 19500, 
    price: 1200, 
    avatar: "HM",
    instagramUrl: "https://instagram.com/harsh_finance",
    linkedinUrl: "https://www.linkedin.com/in/harsh-mittal-finance"
  },
  { 
    name: "Simran Kaur", 
    age: 23, 
    bio: "Sustainable fashion advocate promoting eco-friendly brands.", 
    location: "Bangalore", 
    domain: "Fashion", 
    instagram: 39000, 
    linkedin: 5700, 
    price: 700, 
    avatar: "SK",
    instagramUrl: "https://instagram.com/simran_sustainable",
    linkedinUrl: "https://www.linkedin.com/in/simran-kaur-sustainable"
  },
  { 
    name: "Raghav Sinha", 
    age: 30, 
    bio: "Street food explorer and regional cuisine documenter.", 
    location: "Pune", 
    domain: "Food", 
    instagram: 75000, 
    linkedin: 6300, 
    price: 1400, 
    avatar: "RS",
    instagramUrl: "https://instagram.com/raghav_streetfood",
    linkedinUrl: "https://www.linkedin.com/in/raghav-sinha-food"
  },
  { 
    name: "Kritika Jain", 
    age: 25, 
    bio: "HIIT workout specialist and nutrition coach.", 
    location: "Delhi", 
    domain: "Fitness", 
    instagram: 52000, 
    linkedin: 7800, 
    price: 900, 
    avatar: "KJ",
    instagramUrl: "https://instagram.com/kritika_hiit",
    linkedinUrl: "https://www.linkedin.com/in/kritika-jain-fitness"
  },
  { 
    name: "Aryan Das", 
    age: 28, 
    bio: "Cybersecurity expert and ethical hacking educator.", 
    location: "Mumbai", 
    domain: "Tech", 
    instagram: 46000, 
    linkedin: 21000, 
    price: 1300, 
    avatar: "AD",
    instagramUrl: "https://instagram.com/aryan_cybersec",
    linkedinUrl: "https://www.linkedin.com/in/aryan-das-cybersecurity"
  },
  { 
    name: "Rhea Malhotra", 
    age: 26, 
    bio: "Clean beauty enthusiast and organic skincare advocate.", 
    location: "Bangalore", 
    domain: "Beauty", 
    instagram: 79000, 
    linkedin: 8100, 
    price: 1500, 
    avatar: "RM",
    instagramUrl: "https://instagram.com/rhea_cleanbeauty",
    linkedinUrl: "https://www.linkedin.com/in/rhea-malhotra-beauty"
  },
  { 
    name: "Yash Thakur", 
    age: 29, 
    bio: "Mountain trekking guide and nature photography expert.", 
    location: "Hyderabad", 
    domain: "Travel", 
    instagram: 86000, 
    linkedin: 10200, 
    price: 1750, 
    avatar: "YT",
    instagramUrl: "https://instagram.com/yash_mountains",
    linkedinUrl: "https://www.linkedin.com/in/yash-thakur-travel"
  }
];

let filteredInfluencers = [...influencersData];
let currentSort = 'relevance';

// Popup elements
let profilePopup;
let isPopupVisible = false;

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    // Create popup element
    profilePopup = document.getElementById('profilePopup');
    
    // Display influencers immediately by calling the filter function
    applyFilters();
    
    // Add event listeners for popup
    document.addEventListener('mousemove', handleMouseMove);
});

// Handle mouse movement for popup positioning
function handleMouseMove(e) {
    if (isPopupVisible && profilePopup) {
        const popup = profilePopup;
        const x = e.clientX;
        const y = e.clientY;
        
        // Position popup with offset to avoid cursor overlap
        popup.style.left = (x + 15) + 'px';
        popup.style.top = (y - 10) + 'px';
        
        // Keep popup within viewport bounds
        const popupRect = popup.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        if (popupRect.right > viewportWidth) {
            popup.style.left = (x - popupRect.width - 15) + 'px';
        }
        
        if (popupRect.bottom > viewportHeight) {
            popup.style.top = (y - popupRect.height - 10) + 'px';
        }
    }
}

// Show profile popup
function showProfilePopup(influencer, event) {
    if (!profilePopup) return;
    
    // Update popup content
    document.getElementById('popupAvatar').textContent = influencer.avatar;
    document.getElementById('popupName').textContent = influencer.name;
    document.getElementById('popupBio').textContent = influencer.bio;
    
    // Position popup
    const x = event.clientX;
    const y = event.clientY;
    
    profilePopup.style.left = (x + 15) + 'px';
    profilePopup.style.top = (y - 10) + 'px';
    
    // Show popup
    profilePopup.classList.add('show');
    isPopupVisible = true;
}

// Hide profile popup
function hideProfilePopup() {
    if (profilePopup) {
        profilePopup.classList.remove('show');
        isPopupVisible = false;
    }
}

// Open social media links
function openInstagram(url, event) {
    event.stopPropagation();
    window.open(url, '_blank');
}

function openLinkedIn(url, event) {
    event.stopPropagation();
    window.open(url, '_blank');
}

// Convert USD to INR (approximate rate)
function convertToINR(usdPrice) {
    const exchangeRate = 83; // Approximate USD to INR rate
    return Math.round(usdPrice * exchangeRate);
}

// Display influencers in grid
function displayInfluencers(influencers) {
  const grid = document.getElementById('influencersGrid');
  
  if (influencers.length === 0) {
    grid.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: rgba(255,255,255,0.6);">
        <div style="font-size: 48px; margin-bottom: 16px;">🔍</div>
        <h3 style="margin: 0 0 8px 0; color: var(--muted);">No influencers found</h3>
        <p>Try adjusting your filters or search terms</p>
      </div>
    `;
    return;
  }

  grid.innerHTML = influencers.map((influencer, index) => `
    <div class="influencer-card fade-in" 
         style="animation-delay: ${index * 0.1}s" 
         onclick="contactInfluencer('${influencer.name}')"
         onmouseenter="showProfilePopup(${JSON.stringify(influencer).replace(/"/g, '&quot;')}, event)"
         onmouseleave="hideProfilePopup()"
         data-instagram="${influencer.instagramUrl}"
         data-linkedin="${influencer.linkedinUrl}">
      <div class="influencer-header">
        <div class="avatar">${influencer.avatar}</div>
        <div class="influencer-info">
          <h3>${influencer.name}</h3>
          <div class="influencer-meta">${influencer.age} years • ${influencer.location}</div>
        </div>
      </div>
      
      <div class="domain-tag">${influencer.domain}</div>
      
      <div class="bio">${influencer.bio}</div>
      
      <div class="social-stats">
        <div class="social-stat" onclick="openInstagram('${influencer.instagramUrl}', event)">
          <span class="platform">Instagram</span>
          <span class="count">${formatNumber(influencer.instagram)}</span>
        </div>
        <div class="social-stat" onclick="openLinkedIn('${influencer.linkedinUrl}', event)">
          <span class="platform">LinkedIn</span>
          <span class="count">${formatNumber(influencer.linkedin)}</span>
        </div>
      </div>
      
      <div class="pricing">
        <div class="price-section">
          <div class="price-tag">Contact</div>
          <div class="price-inr">₹${convertToINR(influencer.price).toLocaleString()} INR</div>
        </div>
        <button class="pay-now-btn" onclick="window.location.href='payment.html'">Pay Now</button>
      </div>
    </div>
  `).join('');
}

// Format numbers for display
function formatNumber(num) {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + 'M';
  } else if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'K';
  }
  return num.toString();
}

// Update results count
function updateResultsCount() {
  document.getElementById('resultsCount').textContent = 
    `${filteredInfluencers.length} influencer${filteredInfluencers.length !== 1 ? 's' : ''} found`;
}

// Search functionality
function searchInfluencers(query) {
  const searchTerm = query.toLowerCase();
  filteredInfluencers = influencersData.filter(influencer => {
    return influencer.name.toLowerCase().includes(searchTerm) ||
           influencer.domain.toLowerCase().includes(searchTerm) ||
           influencer.location.toLowerCase().includes(searchTerm) ||
           influencer.bio.toLowerCase().includes(searchTerm);
  });
  
  applyActiveFilters();
}

// Apply all active filters
function applyFilters() {
  let filtered = [...influencersData];
  
  // Apply search if exists
  const searchInput = document.querySelector('.search-bar');
  if (searchInput && searchInput.value) {
    const searchTerm = searchInput.value.toLowerCase();
    filtered = filtered.filter(influencer => {
      return influencer.name.toLowerCase().includes(searchTerm) ||
             influencer.domain.toLowerCase().includes(searchTerm) ||
             influencer.location.toLowerCase().includes(searchTerm) ||
             influencer.bio.toLowerCase().includes(searchTerm);
    });
  }
  
  // Age filter
  const ageRange = document.getElementById('ageRange').value;
  filtered = filtered.filter(influencer => influencer.age <= ageRange);
  
  // Domain filters
  const domainCheckboxes = document.querySelectorAll('#domainFilters input[type="checkbox"]:checked');
  if (domainCheckboxes.length > 0) {
    const selectedDomains = Array.from(domainCheckboxes).map(cb => cb.value);
    filtered = filtered.filter(influencer => selectedDomains.includes(influencer.domain));
  }
  
  // Price filter
  const priceRange = document.getElementById('priceRange').value;
  filtered = filtered.filter(influencer => influencer.price <= priceRange);
  
  // Follower filters
  const followerCheckboxes = document.querySelectorAll('#micro, #mid, #macro, #mega');
  const checkedFollowerFilters = Array.from(followerCheckboxes).filter(cb => cb.checked);
  if (checkedFollowerFilters.length > 0) {
    filtered = filtered.filter(influencer => {
      const followers = influencer.instagram;
      return checkedFollowerFilters.some(cb => {
        const range = cb.value;
        if (range === '1000-10000') return followers >= 1000 && followers <= 10000;
        if (range === '10000-100000') return followers >= 10000 && followers <= 100000;
        if (range === '100000-1000000') return followers >= 100000 && followers <= 1000000;
        if (range === '1000000+') return followers >= 1000000;
        return false;
      });
    });
  }
  
  // Location filters
  const locationCheckboxes = document.querySelectorAll('#locationFilters input[type="checkbox"]:checked');
  if (locationCheckboxes.length > 0) {
    const selectedLocations = Array.from(locationCheckboxes).map(cb => cb.value);
    filtered = filtered.filter(influencer => selectedLocations.includes(influencer.location));
  }
  
  filteredInfluencers = filtered;
  
  // Apply current sort
  if (currentSort !== 'relevance') {
    sortInfluencers(currentSort, false);
  }
  
  displayInfluencers(filteredInfluencers);
  updateResultsCount();
}

// Apply active filters (used by search function)
function applyActiveFilters() {
  applyFilters();
}

// Sort functionality
function sortInfluencers(sortBy, updateDisplay = true) {
  currentSort = sortBy;
  
  switch(sortBy) {
    case 'price-low':
      filteredInfluencers.sort((a, b) => a.price - b.price);
      break;
    case 'price-high':
      filteredInfluencers.sort((a, b) => b.price - a.price);
      break;
    case 'followers-high':
      filteredInfluencers.sort((a, b) => b.instagram - a.instagram);
      break;
    case 'followers-low':
      filteredInfluencers.sort((a, b) => a.instagram - b.instagram);
      break;
    case 'name':
      filteredInfluencers.sort((a, b) => a.name.localeCompare(b.name));
      break;
    default: // relevance
      // For relevance, we don't change the order but apply filters
      applyFilters();
      return;
  }
  
  if (updateDisplay) {
    displayInfluencers(filteredInfluencers);
    updateResultsCount();
  }
}

// Update age range display
function updateAgeRange(value) {
  document.getElementById('ageValue').textContent = `18-${value}`;
  applyFilters();
}

// Update price range display
function updatePriceRange(value) {
  document.getElementById('priceValue').textContent = `$50-${value}`;
  applyFilters();
}

// Clear all filters
function clearAllFilters() {
  // Reset range inputs
  document.getElementById('ageRange').value = 50;
  document.getElementById('priceRange').value = 5000;
  document.getElementById('ageValue').textContent = '18-50';
  document.getElementById('priceValue').textContent = '$50-5000';
  
  // Uncheck all checkboxes
  document.querySelectorAll('.filter-item input[type="checkbox"]').forEach(cb => cb.checked = false);
  
  // Clear search
  document.querySelector('.search-bar').value = '';
  
  // Reset sort
  document.querySelector('.sort-dropdown').value = 'relevance';
  currentSort = 'relevance';
  
  // Reset data and apply default filters
  filteredInfluencers = [...influencersData];
  applyFilters(); // This will handle the initial display with no filters
  
  showToast('All filters cleared!');
}

// Contact influencer (updated from payInfluencer)
function contactInfluencer(name) {
  showToast(`Opening contact form for ${name}... (Demo functionality)`);
}

// Toast notification
function showToast(msg) {
  const toast = document.createElement('div');
  toast.textContent = msg;
  Object.assign(toast.style, {
    position: 'fixed',
    left: '50%',
    transform: 'translateX(-50%)',
    bottom: '26px',
    background: 'rgba(0,0,0,0.8)',
    color: 'white',
    padding: '12px 18px',
    borderRadius: '8px',
    zIndex: 12000,
    transition: 'opacity 300ms',
    boxShadow: '0 4px 12px rgba(0,0,0,0.3)',
    border: '1px solid rgba(255,255,255,0.1)'
  });
  document.body.appendChild(toast);
  
  setTimeout(() => toast.style.opacity = '0', 2500);
  setTimeout(() => toast.remove(), 3000);
}

// Keyboard shortcuts
document.addEventListener('keydown', function(e) {
  if (e.ctrlKey || e.metaKey) {
    switch(e.key) {
      case 'k':
        e.preventDefault();
        document.querySelector('.search-bar').focus();
        break;
      case 'r':
        e.preventDefault();
        clearAllFilters();
        break;
    }
  }
});

// Mobile touch support for popup
document.addEventListener('touchstart', function(e) {
  const card = e.target.closest('.influencer-card');
  if (card) {
    const instagramUrl = card.dataset.instagram;
    const linkedinUrl = card.dataset.linkedin;
    
    // Find influencer data for popup
    const influencer = filteredInfluencers.find(inf => 
      inf.instagramUrl === instagramUrl && inf.linkedinUrl === linkedinUrl
    );
    
    if (influencer) {
      showProfilePopup(influencer, e.touches[0]);
      
      // Auto-hide popup after 3 seconds on mobile
      setTimeout(hideProfilePopup, 3000);
    }
  } else {
    hideProfilePopup();
  }
});
</script>

</body>
</html>
